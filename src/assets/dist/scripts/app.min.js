!function e(t,n,r){function o(u,a){if(!n[u]){if(!t[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(i)return i(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[u]={exports:{}};t[u][0].call(f.exports,function(e){var n=t[u][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=null,u=function(){function e(){r(this,e),null!==i&&!1!=i instanceof this||(this.counters=new Map,this.events=new Map,this.moduleMap=new Map,i=this)}return o(e,[{key:"addModule",value:function(e,t){return this.moduleMap.set(e,t),this}},{key:"addCounter",value:function(e){var t=Object.prototype.hasOwnProperty;if(!1===t.call(e,"jsModule")||!1===this.moduleMap.has(e.jsModule))return this;var n=this.moduleMap.get(e.jsModule);return this.counters.set(e.id,new n(this,e)),this}},{key:"addEvent",value:function(e){var t=e.jsModule,n=e.type,r=e.options,o=void 0===r?{}:r;if(!this.moduleMap.has(t))return this;t=this.moduleMap.get(t);var i=this.events.has(n)?this.events.get(n):[];return i.push(new t(this,o)),this.events.set(n,i),this}},{key:"addCounters",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var u=o.value;this.addCounter(u)}}catch(a){n=!0,r=a}finally{try{!t&&i["return"]&&i["return"]()}finally{if(n)throw r}}return this}},{key:"addEvents",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var u=o.value;this.addEvent(u)}}catch(a){n=!0,r=a}finally{try{!t&&i["return"]&&i["return"]()}finally{if(n)throw r}}return this}}],[{key:"logError",value:function(e){"undefined"!=typeof console&&console.log(e)}}]),e}();n.IntentAnalytics=u},{}],2:[function(e,t,n){(function(t){"use strict";var n=e("./IntentAnalytics"),r=e("./counters/GoogleAnalytics"),o=e("./counters/YandexMetrika"),i=e("./counters/Piwik"),u=e("./events/Click"),a=e("./events/Submit"),c=new n.IntentAnalytics;c.addModule("GoogleAnalytics",r.GoogleAnalytics),c.addModule("YandexMetrika",o.YandexMetrika),c.addModule("Piwik",i.Piwik),c.addModule("Click",u.Click),c.addModule("Submit",a.Submit),t.IntentAnalytics=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./IntentAnalytics":1,"./counters/GoogleAnalytics":4,"./counters/Piwik":5,"./counters/YandexMetrika":6,"./events/Click":7,"./events/Submit":9}],3:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n){r(this,e),Object.assign(this,n),this.counterSet=!1,this.locator=t,this.init(n.options),this.resolveJsObject(n.jsObject)}return o(e,[{key:"init",value:function(e){}},{key:"resolveJsObject",value:function(e){return{}}},{key:"sendEvent",value:function(e,t,n){}}]),e}();n.CounterInterface=i},{}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.GoogleAnalytics=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function y(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:y(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},l=e("./CounterInterface"),f=e("../IntentAnalytics"),s=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,[{key:"init",value:function(e){c(Object.getPrototypeOf(t.prototype),"init",this).call(this,e)}},{key:"resolveJsObject",value:function(e){var t=this;"function"==typeof window[e]?window[e](function(){try{t.jsObject=window[e].getByName(t.title),t.counterSet=!0}catch(n){f.IntentAnalytics.logError("Cant initialize GoogleCounter with title '"+t.title+"'")}}):f.IntentAnalytics.logError("Global Google Analytics function '"+e+"' not found!")}},{key:"sendEvent",value:function(e,t,n){console.log(u(this.jsObject))}}]),t}(l.CounterInterface);n.GoogleAnalytics=s},{"../IntentAnalytics":1,"./CounterInterface":3}],5:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.CounterPiwik=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function f(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:f(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},c=e("./CounterInterface"),l=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),u(t,[{key:"init",value:function(e){a(Object.getPrototypeOf(t.prototype),"init",this).call(this,e)}},{key:"resolveJsObject",value:function(e){return window[e]||a(Object.getPrototypeOf(t.prototype),"resolveJsObject",this).call(this,e)}},{key:"sendEvent",value:function(e,t,n){}}]),t}(c.CounterInterface);n.CounterPiwik=l},{"./CounterInterface":3}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.YandexMetrika=void 0;var u=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(c){o=!0,i=c}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function s(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:s(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},l=e("./CounterInterface"),f=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,[{key:"init",value:function(e){this.eventsQueue=new Map,c(Object.getPrototypeOf(t.prototype),"init",this).call(this,e)}},{key:"resolveJsObject",value:function(e){var t=this;document.addEventListener(String(""+e+this.counterId+"inited").toLowerCase(),function(){"undefined"!=typeof window[e+t.counterId]?(t.jsObject=window[e+t.counterId],t.counterSet=!0):IntentAnalytics.logError("Cant initialize YandexCounter with id '"+t.counterId+"'")})}},{key:"sendEvent",value:function(e,t,n){if(!1===this.counterSet)this.eventsQueue.set(Symbol(),{event:e,data:t,params:n});else{if(this.eventsQueue.size>0){var r=!0,o=!1,i=void 0;try{for(var a,c=this.eventsQueue[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var l=u(a.value,2),f=l[0],s=l[1];this.send(s),this.eventsQueue["delete"](f)}}catch(y){o=!0,i=y}finally{try{!r&&c["return"]&&c["return"]()}finally{if(o)throw i}}}this.send({event:e,data:t,params:n})}}},{key:"send",value:function(e){var t=e.event;e.data,e.params;console.log(t)}}]),t}(l.CounterInterface);n.YandexMetrika=f},{"./CounterInterface":3}],7:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.Click=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./EventInterface"),c=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),u(t,[{key:"handle",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.locator.counters.values()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var u=o.value;u.sendEvent(e,{},{})}}catch(a){n=!0,r=a}finally{try{!t&&i["return"]&&i["return"]()}finally{if(n)throw r}}}},{key:"eventName",get:function(){return"click"}}]),t}(a.EventInterface);n.Click=c},{"./EventInterface":8}],8:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n){r(this,e),this.locator=t,this.init(n),this.attachHandlers(n)}return o(e,[{key:"init",value:function(e){}},{key:"attachHandlers",value:function(e){var t=this,n=Object.prototype.hasOwnProperty;if(null!==e&&n.call(e,"selectors")){var r=!0,o=!1,i=void 0;try{for(var u,a=e.selectors[Symbol.iterator]();!(r=(u=a.next()).done);r=!0)for(var c=u.value,l=document.querySelectorAll(c),f=0;f<l.length;f++)l[f].addEventListener(this.eventName,function(e){return t.handle(e)})}catch(s){o=!0,i=s}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}}}},{key:"handle",value:function(e){}},{key:"eventName",get:function(){return""}}]),e}();n.EventInterface=i},{}],9:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.Submit=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./EventInterface"),c=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),u(t,[{key:"handle",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.locator.counters.values()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var u=o.value;u.sendEvent(e,{},{})}}catch(a){n=!0,r=a}finally{try{!t&&i["return"]&&i["return"]()}finally{if(n)throw r}}}},{key:"eventName",get:function(){return"submit"}}]),t}(a.EventInterface);n.Submit=c},{"./EventInterface":8}]},{},[2]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAuanMiLCJqcy9JbnRlbnRBbmFseXRpY3MuanMiLCJqcy9hcHAuanMiLCJqcy9jb3VudGVycy9Db3VudGVySW50ZXJmYWNlLmpzIiwianMvY291bnRlcnMvR29vZ2xlQW5hbHl0aWNzLmpzIiwianMvY291bnRlcnMvUGl3aWsuanMiLCJqcy9jb3VudGVycy9ZYW5kZXhNZXRyaWthLmpzIiwianMvZXZlbnRzL0NsaWNrLmpzIiwianMvZXZlbnRzL0V2ZW50SW50ZXJmYWNlLmpzIiwianMvZXZlbnRzL1N1Ym1pdC5qcyJdLCJuYW1lcyI6WyJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiZiIsIkVycm9yIiwiY29kZSIsImwiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJJbnRlbnRBbmFseXRpY3MiLCJ0aGlzIiwiY291bnRlcnMiLCJNYXAiLCJldmVudHMiLCJtb2R1bGVNYXAiLCJqc01vZHVsZSIsImpzT2JqZWN0Iiwic2V0IiwiY291bnRlciIsImhhcyIsImhhc093blByb3BlcnR5IiwiZ2V0IiwiaWQiLCJfcmVmIiwidHlwZSIsIl9yZWYkb3B0aW9ucyIsIm9wdGlvbnMiLCJ1bmRlZmluZWQiLCJfYXJyYXkiLCJwdXNoIiwiY291bnRlcnNBcnJheSIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24iLCJfZGlkSXRlcmF0b3JFcnJvciIsIl9pdGVyYXRvckVycm9yIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwiYWRkQ291bnRlciIsImVyciIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yIiwiX2RpZEl0ZXJhdG9yRXJyb3IyIiwiX2l0ZXJhdG9yRXJyb3IyIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsImV2ZW50IiwiYWRkRXZlbnQiLCJtZXNzYWdlIiwiY29uc29sZSIsImxvZyIsIjIiLCJnbG9iYWwiLCJfSW50ZW50QW5hbHl0aWNzIiwiX0dvb2dsZUFuYWx5dGljcyIsIl9ZYW5kZXhNZXRyaWthIiwiX1Bpd2lrIiwiX0NsaWNrIiwiX1N1Ym1pdCIsInVhIiwiYWRkTW9kdWxlIiwiR29vZ2xlQW5hbHl0aWNzIiwiWWFuZGV4TWV0cmlrYSIsIlBpd2lrIiwiQ2xpY2siLCJTdWJtaXQiLCJzZWxmIiwid2luZG93IiwiLi9JbnRlbnRBbmFseXRpY3MiLCIuL2NvdW50ZXJzL0dvb2dsZUFuYWx5dGljcyIsIi4vY291bnRlcnMvUGl3aWsiLCIuL2NvdW50ZXJzL1lhbmRleE1ldHJpa2EiLCIuL2V2ZW50cy9DbGljayIsIi4vZXZlbnRzL1N1Ym1pdCIsIjMiLCJDb3VudGVySW50ZXJmYWNlIiwibG9jYXRvciIsImFzc2lnbiIsImNvdW50ZXJTZXQiLCJpbml0IiwicmVzb2x2ZUpzT2JqZWN0IiwibmFtZSIsImRhdGEiLCJwYXJhbXMiLCI0IiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsImNvbnN0cnVjdG9yIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfdHlwZW9mIiwib2JqIiwiX2dldCIsIm9iamVjdCIsInByb3BlcnR5IiwicmVjZWl2ZXIiLCJGdW5jdGlvbiIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJwYXJlbnQiLCJnZXRQcm90b3R5cGVPZiIsImdldHRlciIsIl9Db3VudGVySW50ZXJmYWNlMiIsIl9Db3VudGVySW50ZXJmYWNlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJfdGhpczIiLCJnZXRCeU5hbWUiLCJ0aXRsZSIsIiRlIiwibG9nRXJyb3IiLCIuLi9JbnRlbnRBbmFseXRpY3MiLCIuL0NvdW50ZXJJbnRlcmZhY2UiLCI1IiwiQ291bnRlclBpd2lrIiwiNiIsIl9zbGljZWRUb0FycmF5Iiwic2xpY2VJdGVyYXRvciIsImFyciIsIl9hcnIiLCJfbiIsIl9kIiwiX2UiLCJfcyIsIl9pIiwiQXJyYXkiLCJpc0FycmF5IiwiZXZlbnRzUXVldWUiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJTdHJpbmciLCJjb3VudGVySWQiLCJ0b0xvd2VyQ2FzZSIsInNpemUiLCJfc3RlcCR2YWx1ZSIsInNlbmQiLCI3IiwiX0V2ZW50SW50ZXJmYWNlMiIsIl9FdmVudEludGVyZmFjZSIsInZhbHVlcyIsInNlbmRFdmVudCIsIkV2ZW50SW50ZXJmYWNlIiwiLi9FdmVudEludGVyZmFjZSIsIjgiLCJhdHRhY2hIYW5kbGVycyIsIl90aGlzIiwic2VsZWN0b3JzIiwic2VsZWN0b3IiLCJlbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJldmVudE5hbWUiLCJoYW5kbGUiLCI5Il0sIm1hcHBpbmdzIjoiQ0FBQSxRQUFBQSxHQUFBQyxFQUFBQyxFQUFBQyxHQUFBLFFBQUFDLEdBQUFDLEVBQUFDLEdBQUEsSUFBQUosRUFBQUcsR0FBQSxDQUFBLElBQUFKLEVBQUFJLEdBQUEsQ0FBQSxHQUFBRSxHQUFBLGtCQUFBQyxVQUFBQSxPQUFBLEtBQUFGLEdBQUFDLEVBQUEsTUFBQUEsR0FBQUYsR0FBQSxFQUFBLElBQUFJLEVBQUEsTUFBQUEsR0FBQUosR0FBQSxFQUFBLElBQUFLLEdBQUEsR0FBQUMsT0FBQSx1QkFBQU4sRUFBQSxJQUFBLE1BQUFLLEdBQUFFLEtBQUEsbUJBQUFGLEVBQUEsR0FB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bEUsU0FBU3FJLFNBQTFDNUcsT0FBQUMsY0FBQU4sR0FBQUcsRUFBQUMsRUFBQUcsUUFBQUMsTUFBQVIsR0FBQSxFQUFvRCxDQUFBLEdBQTNDYixHQUEyQ2dCLEVBQUF0QyxLQUNoRHNCLEdBQVErSCxVQUFVbEcsVUFGWixNQUFBTixHQUFBVCxHQUFBLEVBQUFDLEVBQUFRLEVBQUEsUUFBQSxLQUFBVixHQUFBSSxFQUFBQSxXQUFBQSxFQUFBQSxZQUFBLFFBQUEsR0FBQUgsRUFBQSxLQUFBQyxRVDh3QlY1QixJQUFLLFlBQ0xnQixJQUFLLFdTdHhCTCxNQUFPLGFUMnhCSjZDLEdBQ1Q0RSxFQUFpQkksZUFFbkJqSyxHU2h4QlFpRixPQUFBQSxJVGt4QkxpRixtQkFBbUIsU0FBUyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgaW5zdGFuY2UgPSBudWxsO1xuXG52YXIgSW50ZW50QW5hbHl0aWNzID0gZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIFNpbmdsZXRvblxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICovXG5cbiAgICBmdW5jdGlvbiBJbnRlbnRBbmFseXRpY3MoKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbnRlbnRBbmFseXRpY3MpO1xuXG4gICAgICAgIGlmIChudWxsID09PSBpbnN0YW5jZSB8fCBmYWxzZSA9PT0gaW5zdGFuY2UgaW5zdGFuY2VvZiB0aGlzKSB7XG4gICAgICAgICAgICB0aGlzLmNvdW50ZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgdGhpcy5ldmVudHMgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICB0aGlzLm1vZHVsZU1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIGluc3RhbmNlID0gdGhpcztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBtb2R1bGVcbiAgICAgKiBAcGFyYW0ganNNb2R1bGVcbiAgICAgKiBAcGFyYW0ganNPYmplY3RcbiAgICAgKiBAcmV0dXJuIHtJbnRlbnRBbmFseXRpY3N9XG4gICAgICovXG5cblxuICAgIF9jcmVhdGVDbGFzcyhJbnRlbnRBbmFseXRpY3MsIFt7XG4gICAgICAgIGtleTogJ2FkZE1vZHVsZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRNb2R1bGUoanNNb2R1bGUsIGpzT2JqZWN0KSB7XG4gICAgICAgICAgICB0aGlzLm1vZHVsZU1hcC5zZXQoanNNb2R1bGUsIGpzT2JqZWN0KTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkIGNvdW50ZXJcbiAgICAgICAgICogQHBhcmFtIGNvdW50ZXJcbiAgICAgICAgICogQHJldHVybiB7SW50ZW50QW5hbHl0aWNzfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYWRkQ291bnRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRDb3VudGVyKGNvdW50ZXIpIHtcbiAgICAgICAgICAgIHZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuICAgICAgICAgICAgaWYgKGZhbHNlID09PSBoYXMuY2FsbChjb3VudGVyLCAnanNNb2R1bGUnKSB8fCBmYWxzZSA9PT0gdGhpcy5tb2R1bGVNYXAuaGFzKGNvdW50ZXIuanNNb2R1bGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIganNNb2R1bGUgPSB0aGlzLm1vZHVsZU1hcC5nZXQoY291bnRlci5qc01vZHVsZSk7XG4gICAgICAgICAgICB0aGlzLmNvdW50ZXJzLnNldChjb3VudGVyLmlkLCBuZXcganNNb2R1bGUodGhpcywgY291bnRlcikpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgZXZlbnRcbiAgICAgICAgICogQHBhcmFtIGpzTW9kdWxlXG4gICAgICAgICAqIEBwYXJhbSB0eXBlXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICAgICAqIEByZXR1cm4ge0ludGVudEFuYWx5dGljc31cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2FkZEV2ZW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEV2ZW50KF9yZWYpIHtcbiAgICAgICAgICAgIHZhciBqc01vZHVsZSA9IF9yZWYuanNNb2R1bGU7XG4gICAgICAgICAgICB2YXIgdHlwZSA9IF9yZWYudHlwZTtcbiAgICAgICAgICAgIHZhciBfcmVmJG9wdGlvbnMgPSBfcmVmLm9wdGlvbnM7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IF9yZWYkb3B0aW9ucyA9PT0gdW5kZWZpbmVkID8ge30gOiBfcmVmJG9wdGlvbnM7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5tb2R1bGVNYXAuaGFzKGpzTW9kdWxlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAganNNb2R1bGUgPSB0aGlzLm1vZHVsZU1hcC5nZXQoanNNb2R1bGUpO1xuXG4gICAgICAgICAgICB2YXIgX2FycmF5ID0gdGhpcy5ldmVudHMuaGFzKHR5cGUpID8gdGhpcy5ldmVudHMuZ2V0KHR5cGUpIDogW107XG4gICAgICAgICAgICBfYXJyYXkucHVzaChuZXcganNNb2R1bGUodGhpcywgb3B0aW9ucykpO1xuICAgICAgICAgICAgdGhpcy5ldmVudHMuc2V0KHR5cGUsIF9hcnJheSk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZCBjb3VudGVyc1xuICAgICAgICAgKiBAcGFyYW0gY291bnRlcnNBcnJheVxuICAgICAgICAgKiBAcmV0dXJuIHtJbnRlbnRBbmFseXRpY3N9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdhZGRDb3VudGVycycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRDb3VudGVycyhjb3VudGVyc0FycmF5KSB7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBjb3VudGVyc0FycmF5W1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRlciA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQ291bnRlcihjb3VudGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgZXZlbnRzXG4gICAgICAgICAqIEBwYXJhbSBldmVudHNcbiAgICAgICAgICogQHJldHVybiB7SW50ZW50QW5hbHl0aWNzfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYWRkRXZlbnRzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEV2ZW50cyhldmVudHMpIHtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IyID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSBldmVudHNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV2ZW50ID0gX3N0ZXAyLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IyID0gZXJyO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yICYmIF9pdGVyYXRvcjIucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAgICBrZXk6ICdsb2dFcnJvcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBsb2dFcnJvcihtZXNzYWdlKSB7XG4gICAgICAgICAgICAvKmVzbGludC1kaXNhYmxlICovXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKmVzbGludC1lbmFibGUqL1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEludGVudEFuYWx5dGljcztcbn0oKTtcblxuZXhwb3J0cy5JbnRlbnRBbmFseXRpY3MgPSBJbnRlbnRBbmFseXRpY3M7XG5cbn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChnbG9iYWwpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX0ludGVudEFuYWx5dGljcyA9IHJlcXVpcmUoJy4vSW50ZW50QW5hbHl0aWNzJyk7XG5cbnZhciBfR29vZ2xlQW5hbHl0aWNzID0gcmVxdWlyZSgnLi9jb3VudGVycy9Hb29nbGVBbmFseXRpY3MnKTtcblxudmFyIF9ZYW5kZXhNZXRyaWthID0gcmVxdWlyZSgnLi9jb3VudGVycy9ZYW5kZXhNZXRyaWthJyk7XG5cbnZhciBfUGl3aWsgPSByZXF1aXJlKCcuL2NvdW50ZXJzL1Bpd2lrJyk7XG5cbnZhciBfQ2xpY2sgPSByZXF1aXJlKCcuL2V2ZW50cy9DbGljaycpO1xuXG52YXIgX1N1Ym1pdCA9IHJlcXVpcmUoJy4vZXZlbnRzL1N1Ym1pdCcpO1xuXG52YXIgdWEgPSBuZXcgX0ludGVudEFuYWx5dGljcy5JbnRlbnRBbmFseXRpY3MoKTtcbnVhLmFkZE1vZHVsZSgnR29vZ2xlQW5hbHl0aWNzJywgX0dvb2dsZUFuYWx5dGljcy5Hb29nbGVBbmFseXRpY3MpO1xudWEuYWRkTW9kdWxlKCdZYW5kZXhNZXRyaWthJywgX1lhbmRleE1ldHJpa2EuWWFuZGV4TWV0cmlrYSk7XG51YS5hZGRNb2R1bGUoJ1Bpd2lrJywgX1Bpd2lrLlBpd2lrKTtcbnVhLmFkZE1vZHVsZSgnQ2xpY2snLCBfQ2xpY2suQ2xpY2spO1xudWEuYWRkTW9kdWxlKCdTdWJtaXQnLCBfU3VibWl0LlN1Ym1pdCk7XG4vL2dsb2JhbC5pbnRlbnRBbmFseXRpY3MgPSBuZXcgSW50ZW50QW5hbHl0aWNzKCk7XG5nbG9iYWwuSW50ZW50QW5hbHl0aWNzID0gdWE7XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxuXG59LHtcIi4vSW50ZW50QW5hbHl0aWNzXCI6MSxcIi4vY291bnRlcnMvR29vZ2xlQW5hbHl0aWNzXCI6NCxcIi4vY291bnRlcnMvUGl3aWtcIjo1LFwiLi9jb3VudGVycy9ZYW5kZXhNZXRyaWthXCI6NixcIi4vZXZlbnRzL0NsaWNrXCI6NyxcIi4vZXZlbnRzL1N1Ym1pdFwiOjl9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgQ291bnRlckludGVyZmFjZSA9IGZ1bmN0aW9uICgpIHtcblxuICAvKipcbiAgICogSGVyZSB3ZSB0dXJuIG9mZiBuby11bnVzZWQtdmFycyB3YXJuaW5nIGJlY2F1c2UgdGhpcyBjbGFzcyBpcyBhY3R1YWxseSBhYnN0cmFjdC5cbiAgICogU28gdGhlcmUncyBhIGxvdCBvZiB1bnVzZWQgdmFycyBhbmQgaXQgaXMgbm9ybWFsIC0gd2UganVzdCB3YW50IHRvIGRlc2NyaWJlIHRoZSB3aG9sZSBpbnRlcmZhY2UuXG4gICAqXG4gICAqIGVzbGludCBuby11bnVzZWQtdmFyczogMFxuICAgKlxuICAgKiBAcGFyYW0gbG9jYXRvciB7SW50ZW50QW5hbHl0aWNzfVxuICAgKiBAcGFyYW0gY291bnRlclxuICAgKi9cblxuICBmdW5jdGlvbiBDb3VudGVySW50ZXJmYWNlKGxvY2F0b3IsIGNvdW50ZXIpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ291bnRlckludGVyZmFjZSk7XG5cbiAgICBPYmplY3QuYXNzaWduKHRoaXMsIGNvdW50ZXIpO1xuICAgIHRoaXMuY291bnRlclNldCA9IGZhbHNlO1xuICAgIHRoaXMubG9jYXRvciA9IGxvY2F0b3I7XG4gICAgdGhpcy5pbml0KGNvdW50ZXIub3B0aW9ucyk7XG4gICAgdGhpcy5yZXNvbHZlSnNPYmplY3QoY291bnRlci5qc09iamVjdCk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdFxuICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgKi9cblxuXG4gIF9jcmVhdGVDbGFzcyhDb3VudGVySW50ZXJmYWNlLCBbe1xuICAgIGtleTogXCJpbml0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQob3B0aW9ucykge31cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBuYW1lXG4gICAgICogQHJldHVybiB7e319XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJyZXNvbHZlSnNPYmplY3RcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzb2x2ZUpzT2JqZWN0KG5hbWUpIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZW5kIGV2ZW50XG4gICAgICogQHBhcmFtIGV2ZW50XG4gICAgICogQHBhcmFtIGRhdGFcbiAgICAgKiBAcGFyYW0gcGFyYW1zXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJzZW5kRXZlbnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2VuZEV2ZW50KGV2ZW50LCBkYXRhLCBwYXJhbXMpIHt9XG4gIH1dKTtcblxuICByZXR1cm4gQ291bnRlckludGVyZmFjZTtcbn0oKTtcblxuZXhwb3J0cy5Db3VudGVySW50ZXJmYWNlID0gQ291bnRlckludGVyZmFjZTtcblxufSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuR29vZ2xlQW5hbHl0aWNzID0gdW5kZWZpbmVkO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOyB9IH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9O1xuXG52YXIgX0NvdW50ZXJJbnRlcmZhY2UyID0gcmVxdWlyZSgnLi9Db3VudGVySW50ZXJmYWNlJyk7XG5cbnZhciBfSW50ZW50QW5hbHl0aWNzID0gcmVxdWlyZSgnLi4vSW50ZW50QW5hbHl0aWNzJyk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIEdvb2dsZUFuYWx5dGljcyA9IGZ1bmN0aW9uIChfQ291bnRlckludGVyZmFjZSkge1xuICAgIF9pbmhlcml0cyhHb29nbGVBbmFseXRpY3MsIF9Db3VudGVySW50ZXJmYWNlKTtcblxuICAgIGZ1bmN0aW9uIEdvb2dsZUFuYWx5dGljcygpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdvb2dsZUFuYWx5dGljcyk7XG5cbiAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIE9iamVjdC5nZXRQcm90b3R5cGVPZihHb29nbGVBbmFseXRpY3MpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhHb29nbGVBbmFseXRpY3MsIFt7XG4gICAgICAgIGtleTogJ2luaXQnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAgICAgKi9cbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQob3B0aW9ucykge1xuICAgICAgICAgICAgX2dldChPYmplY3QuZ2V0UHJvdG90eXBlT2YoR29vZ2xlQW5hbHl0aWNzLnByb3RvdHlwZSksICdpbml0JywgdGhpcykuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gbmFtZVxuICAgICAgICAgKiBAcmV0dXJuIHt7fX1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3Jlc29sdmVKc09iamVjdCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXNvbHZlSnNPYmplY3QobmFtZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93W25hbWVdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3dbbmFtZV0oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmpzT2JqZWN0ID0gd2luZG93W25hbWVdLmdldEJ5TmFtZShfdGhpczIudGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmNvdW50ZXJTZXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICgkZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX0ludGVudEFuYWx5dGljcy5JbnRlbnRBbmFseXRpY3MubG9nRXJyb3IoJ0NhbnQgaW5pdGlhbGl6ZSBHb29nbGVDb3VudGVyIHdpdGggdGl0bGUgXFwnJyArIF90aGlzMi50aXRsZSArICdcXCcnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfSW50ZW50QW5hbHl0aWNzLkludGVudEFuYWx5dGljcy5sb2dFcnJvcignR2xvYmFsIEdvb2dsZSBBbmFseXRpY3MgZnVuY3Rpb24gXFwnJyArIG5hbWUgKyAnXFwnIG5vdCBmb3VuZCEnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgICAgICogQHBhcmFtIGRhdGFcbiAgICAgICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2VuZEV2ZW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmRFdmVudChldmVudCwgZGF0YSwgcGFyYW1zKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhfdHlwZW9mKHRoaXMuanNPYmplY3QpKTtcbiAgICAgICAgICAgIC8vIHRoaXMuanNPYmplY3QoJ3NlbmQnLCAnZXZlbnQnLCApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEdvb2dsZUFuYWx5dGljcztcbn0oX0NvdW50ZXJJbnRlcmZhY2UyLkNvdW50ZXJJbnRlcmZhY2UpO1xuXG5leHBvcnRzLkdvb2dsZUFuYWx5dGljcyA9IEdvb2dsZUFuYWx5dGljcztcblxufSx7XCIuLi9JbnRlbnRBbmFseXRpY3NcIjoxLFwiLi9Db3VudGVySW50ZXJmYWNlXCI6M31dLDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5Db3VudGVyUGl3aWsgPSB1bmRlZmluZWQ7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KG9iamVjdCwgcHJvcGVydHksIHJlY2VpdmVyKSB7IGlmIChvYmplY3QgPT09IG51bGwpIG9iamVjdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyByZXR1cm4gZ2V0KHBhcmVudCwgcHJvcGVydHksIHJlY2VpdmVyKTsgfSB9IGVsc2UgaWYgKFwidmFsdWVcIiBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfTtcblxudmFyIF9Db3VudGVySW50ZXJmYWNlMiA9IHJlcXVpcmUoJy4vQ291bnRlckludGVyZmFjZScpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBDb3VudGVyUGl3aWsgPSBmdW5jdGlvbiAoX0NvdW50ZXJJbnRlcmZhY2UpIHtcbiAgX2luaGVyaXRzKENvdW50ZXJQaXdpaywgX0NvdW50ZXJJbnRlcmZhY2UpO1xuXG4gIGZ1bmN0aW9uIENvdW50ZXJQaXdpaygpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ291bnRlclBpd2lrKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ291bnRlclBpd2lrKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhDb3VudGVyUGl3aWssIFt7XG4gICAga2V5OiAnaW5pdCcsXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KG9wdGlvbnMpIHtcbiAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKENvdW50ZXJQaXdpay5wcm90b3R5cGUpLCAnaW5pdCcsIHRoaXMpLmNhbGwodGhpcywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIG5hbWVcbiAgICAgKiBAcmV0dXJuIHt7fX1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAncmVzb2x2ZUpzT2JqZWN0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzb2x2ZUpzT2JqZWN0KG5hbWUpIHtcbiAgICAgIHJldHVybiB3aW5kb3dbbmFtZV0gfHwgX2dldChPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ291bnRlclBpd2lrLnByb3RvdHlwZSksICdyZXNvbHZlSnNPYmplY3QnLCB0aGlzKS5jYWxsKHRoaXMsIG5hbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBldmVudFxuICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdzZW5kRXZlbnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kRXZlbnQoZXZlbnQsIGRhdGEsIHBhcmFtcykge31cbiAgfV0pO1xuXG4gIHJldHVybiBDb3VudGVyUGl3aWs7XG59KF9Db3VudGVySW50ZXJmYWNlMi5Db3VudGVySW50ZXJmYWNlKTtcblxuZXhwb3J0cy5Db3VudGVyUGl3aWsgPSBDb3VudGVyUGl3aWs7XG5cbn0se1wiLi9Db3VudGVySW50ZXJmYWNlXCI6M31dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLllhbmRleE1ldHJpa2EgPSB1bmRlZmluZWQ7XG5cbnZhciBfc2xpY2VkVG9BcnJheSA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpOyB9IH07IH0oKTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOyB9IH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9O1xuXG52YXIgX0NvdW50ZXJJbnRlcmZhY2UyID0gcmVxdWlyZSgnLi9Db3VudGVySW50ZXJmYWNlJyk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFlhbmRleE1ldHJpa2EgPSBmdW5jdGlvbiAoX0NvdW50ZXJJbnRlcmZhY2UpIHtcbiAgICBfaW5oZXJpdHMoWWFuZGV4TWV0cmlrYSwgX0NvdW50ZXJJbnRlcmZhY2UpO1xuXG4gICAgZnVuY3Rpb24gWWFuZGV4TWV0cmlrYSgpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFlhbmRleE1ldHJpa2EpO1xuXG4gICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoWWFuZGV4TWV0cmlrYSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFlhbmRleE1ldHJpa2EsIFt7XG4gICAgICAgIGtleTogJ2luaXQnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAgICAgKi9cbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQob3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5ldmVudHNRdWV1ZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKFlhbmRleE1ldHJpa2EucHJvdG90eXBlKSwgJ2luaXQnLCB0aGlzKS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSBuYW1lXG4gICAgICAgICAqIEByZXR1cm4ge3t9fVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVzb2x2ZUpzT2JqZWN0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlc29sdmVKc09iamVjdChuYW1lKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihTdHJpbmcoJycgKyBuYW1lICsgdGhpcy5jb3VudGVySWQgKyAnaW5pdGVkJykudG9Mb3dlckNhc2UoKSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIHdpbmRvd1tuYW1lICsgX3RoaXMyLmNvdW50ZXJJZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmpzT2JqZWN0ID0gd2luZG93W25hbWUgKyBfdGhpczIuY291bnRlcklkXTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmNvdW50ZXJTZXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIEludGVudEFuYWx5dGljcy5sb2dFcnJvcignQ2FudCBpbml0aWFsaXplIFlhbmRleENvdW50ZXIgd2l0aCBpZCBcXCcnICsgX3RoaXMyLmNvdW50ZXJJZCArICdcXCcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgICAgICogQHBhcmFtIGRhdGFcbiAgICAgICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2VuZEV2ZW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmRFdmVudChldmVudCwgZGF0YSwgcGFyYW1zKSB7XG4gICAgICAgICAgICAvL3NvbWUga2luZCBvZiBxdWV1ZSBmb3IgWWFuZGV4IGJlZm9yZSBjb3VudGVyIG5vdCB5ZXQgaW5pdGlhbGl6ZWRcbiAgICAgICAgICAgIC8vR29vZ2xlIGhhcyBvd24gcXVldWVcbiAgICAgICAgICAgIGlmIChmYWxzZSA9PT0gdGhpcy5jb3VudGVyU2V0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHNRdWV1ZS5zZXQoU3ltYm9sKCksIHsgZXZlbnQ6IGV2ZW50LCBkYXRhOiBkYXRhLCBwYXJhbXM6IHBhcmFtcyB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZXZlbnRzUXVldWUuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSB0aGlzLmV2ZW50c1F1ZXVlW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfc3RlcCR2YWx1ZSA9IF9zbGljZWRUb0FycmF5KF9zdGVwLnZhbHVlLCAyKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBfc3RlcCR2YWx1ZVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBfc3RlcCR2YWx1ZVsxXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudHNRdWV1ZS5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbmQoeyBldmVudDogZXZlbnQsIGRhdGE6IGRhdGEsIHBhcmFtczogcGFyYW1zIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSBldmVudFxuICAgICAgICAgKiBAcGFyYW0gZGF0YVxuICAgICAgICAgKiBAcGFyYW0gcGFyYW1zXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZW5kJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmQoX3JlZikge1xuICAgICAgICAgICAgdmFyIGV2ZW50ID0gX3JlZi5ldmVudDtcbiAgICAgICAgICAgIHZhciBkYXRhID0gX3JlZi5kYXRhO1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IF9yZWYucGFyYW1zO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhldmVudCk7XG4gICAgICAgICAgICAvL3RoaXMuanNPYmplY3QucmVhY2hHb2FsKGV2ZW50LCBwYXJhbXMgfHwge30pO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFlhbmRleE1ldHJpa2E7XG59KF9Db3VudGVySW50ZXJmYWNlMi5Db3VudGVySW50ZXJmYWNlKTtcblxuZXhwb3J0cy5ZYW5kZXhNZXRyaWthID0gWWFuZGV4TWV0cmlrYTtcblxufSx7XCIuL0NvdW50ZXJJbnRlcmZhY2VcIjozfV0sNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuQ2xpY2sgPSB1bmRlZmluZWQ7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfRXZlbnRJbnRlcmZhY2UyID0gcmVxdWlyZSgnLi9FdmVudEludGVyZmFjZScpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBDbGljayA9IGZ1bmN0aW9uIChfRXZlbnRJbnRlcmZhY2UpIHtcbiAgICBfaW5oZXJpdHMoQ2xpY2ssIF9FdmVudEludGVyZmFjZSk7XG5cbiAgICBmdW5jdGlvbiBDbGljaygpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENsaWNrKTtcblxuICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKENsaWNrKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQ2xpY2ssIFt7XG4gICAgICAgIGtleTogJ2hhbmRsZScsXG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogSGFuZGxlclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgICAgICovXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGUoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IHRoaXMubG9jYXRvci5jb3VudGVycy52YWx1ZXMoKVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ZXIgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICBjb3VudGVyLnNlbmRFdmVudChldmVudCwge30sIHt9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdldmVudE5hbWUnLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiAnY2xpY2snO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENsaWNrO1xufShfRXZlbnRJbnRlcmZhY2UyLkV2ZW50SW50ZXJmYWNlKTtcblxuZXhwb3J0cy5DbGljayA9IENsaWNrO1xuXG59LHtcIi4vRXZlbnRJbnRlcmZhY2VcIjo4fV0sODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIEV2ZW50SW50ZXJmYWNlID0gZnVuY3Rpb24gKCkge1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGxvY2F0b3IgSW50ZW50QW5hbHl0aWNzXG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKi9cblxuICAgIGZ1bmN0aW9uIEV2ZW50SW50ZXJmYWNlKGxvY2F0b3IsIG9wdGlvbnMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEV2ZW50SW50ZXJmYWNlKTtcblxuICAgICAgICB0aGlzLmxvY2F0b3IgPSBsb2NhdG9yO1xuICAgICAgICB0aGlzLmluaXQob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuYXR0YWNoSGFuZGxlcnMob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEV2ZW50SW50ZXJmYWNlLCBbe1xuICAgICAgICBrZXk6ICdpbml0JyxcblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0XG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICAgICAqL1xuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChvcHRpb25zKSB7fVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYXR0YWNoSGFuZGxlcnMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYXR0YWNoSGFuZGxlcnMob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG4gICAgICAgICAgICBpZiAob3B0aW9ucyAhPT0gbnVsbCAmJiBoYXMuY2FsbChvcHRpb25zLCAnc2VsZWN0b3JzJykpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gb3B0aW9ucy5zZWxlY3RvcnNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNbaV0uYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmV2ZW50TmFtZSwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5oYW5kbGUoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVHJpZ2dlclxuICAgICAgICAgKiBAcGFyYW0gcGFyYW1zXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlKHBhcmFtcykge31cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2V2ZW50TmFtZScsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEV2ZW50SW50ZXJmYWNlO1xufSgpO1xuXG5leHBvcnRzLkV2ZW50SW50ZXJmYWNlID0gRXZlbnRJbnRlcmZhY2U7XG5cbn0se31dLDk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLlN1Ym1pdCA9IHVuZGVmaW5lZDtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9FdmVudEludGVyZmFjZTIgPSByZXF1aXJlKCcuL0V2ZW50SW50ZXJmYWNlJyk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFN1Ym1pdCA9IGZ1bmN0aW9uIChfRXZlbnRJbnRlcmZhY2UpIHtcbiAgICBfaW5oZXJpdHMoU3VibWl0LCBfRXZlbnRJbnRlcmZhY2UpO1xuXG4gICAgZnVuY3Rpb24gU3VibWl0KCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3VibWl0KTtcblxuICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKFN1Ym1pdCkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFN1Ym1pdCwgW3tcbiAgICAgICAga2V5OiAnaGFuZGxlJyxcblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIYW5kbGVyXG4gICAgICAgICAqIEBwYXJhbSBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZShldmVudCkge1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlO1xuICAgICAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gdGhpcy5sb2NhdG9yLmNvdW50ZXJzLnZhbHVlcygpW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRlciA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXIuc2VuZEV2ZW50KGV2ZW50LCB7fSwge30pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2V2ZW50TmFtZScsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuICdzdWJtaXQnO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFN1Ym1pdDtcbn0oX0V2ZW50SW50ZXJmYWNlMi5FdmVudEludGVyZmFjZSk7XG5cbmV4cG9ydHMuU3VibWl0ID0gU3VibWl0O1xuXG59LHtcIi4vRXZlbnRJbnRlcmZhY2VcIjo4fV19LHt9LFsyXSlcblxuIiwibGV0IGluc3RhbmNlID0gbnVsbDtcblxuY2xhc3MgSW50ZW50QW5hbHl0aWNzIHtcbiAgICAvKipcbiAgICAgKiBTaW5nbGV0b25cbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBpZiAobnVsbCA9PT0gaW5zdGFuY2UgfHwgKGZhbHNlID09PSBpbnN0YW5jZSBpbnN0YW5jZW9mIHRoaXMpKSB7XG4gICAgICAgICAgICB0aGlzLmNvdW50ZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgdGhpcy5ldmVudHMgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICB0aGlzLm1vZHVsZU1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIGluc3RhbmNlID0gdGhpcztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBtb2R1bGVcbiAgICAgKiBAcGFyYW0ganNNb2R1bGVcbiAgICAgKiBAcGFyYW0ganNPYmplY3RcbiAgICAgKiBAcmV0dXJuIHtJbnRlbnRBbmFseXRpY3N9XG4gICAgICovXG4gICAgYWRkTW9kdWxlKGpzTW9kdWxlLCBqc09iamVjdCkge1xuICAgICAgICB0aGlzLm1vZHVsZU1hcC5zZXQoanNNb2R1bGUsIGpzT2JqZWN0KTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgY291bnRlclxuICAgICAqIEBwYXJhbSBjb3VudGVyXG4gICAgICogQHJldHVybiB7SW50ZW50QW5hbHl0aWNzfVxuICAgICAqL1xuICAgIGFkZENvdW50ZXIoY291bnRlcikge1xuICAgICAgICBjb25zdCBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuICAgICAgICBpZiAoZmFsc2UgPT09IGhhcy5jYWxsKGNvdW50ZXIsICdqc01vZHVsZScpIHx8IGZhbHNlID09PSB0aGlzLm1vZHVsZU1hcC5oYXMoY291bnRlci5qc01vZHVsZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGpzTW9kdWxlID0gdGhpcy5tb2R1bGVNYXAuZ2V0KGNvdW50ZXIuanNNb2R1bGUpO1xuICAgICAgICB0aGlzLmNvdW50ZXJzLnNldChjb3VudGVyLmlkLCBuZXcganNNb2R1bGUodGhpcywgY291bnRlcikpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBldmVudFxuICAgICAqIEBwYXJhbSBqc01vZHVsZVxuICAgICAqIEBwYXJhbSB0eXBlXG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKiBAcmV0dXJuIHtJbnRlbnRBbmFseXRpY3N9XG4gICAgICovXG4gICAgYWRkRXZlbnQoe2pzTW9kdWxlLCB0eXBlLCBvcHRpb25zID0ge319KSB7XG4gICAgICAgIGlmICghdGhpcy5tb2R1bGVNYXAuaGFzKGpzTW9kdWxlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAganNNb2R1bGUgPSB0aGlzLm1vZHVsZU1hcC5nZXQoanNNb2R1bGUpO1xuXG4gICAgICAgIGxldCBfYXJyYXkgPSB0aGlzLmV2ZW50cy5oYXModHlwZSkgPyB0aGlzLmV2ZW50cy5nZXQodHlwZSkgOiBbXTtcbiAgICAgICAgX2FycmF5LnB1c2gobmV3IGpzTW9kdWxlKHRoaXMsIG9wdGlvbnMpKTtcbiAgICAgICAgdGhpcy5ldmVudHMuc2V0KHR5cGUsIF9hcnJheSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGNvdW50ZXJzXG4gICAgICogQHBhcmFtIGNvdW50ZXJzQXJyYXlcbiAgICAgKiBAcmV0dXJuIHtJbnRlbnRBbmFseXRpY3N9XG4gICAgICovXG4gICAgYWRkQ291bnRlcnMoY291bnRlcnNBcnJheSkge1xuICAgICAgICBmb3IgKGxldCBjb3VudGVyIG9mIGNvdW50ZXJzQXJyYXkpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkQ291bnRlcihjb3VudGVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgZXZlbnRzXG4gICAgICogQHBhcmFtIGV2ZW50c1xuICAgICAqIEByZXR1cm4ge0ludGVudEFuYWx5dGljc31cbiAgICAgKi9cbiAgICBhZGRFdmVudHMoZXZlbnRzKSB7XG4gICAgICAgIGZvciAobGV0IGV2ZW50IG9mIGV2ZW50cykge1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudChldmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBzdGF0aWMgbG9nRXJyb3IobWVzc2FnZSkge1xuICAgICAgICAvKmVzbGludC1kaXNhYmxlICovXG4gICAgICAgIGlmICh0eXBlb2YoY29uc29sZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICAvKmVzbGludC1lbmFibGUqL1xuICAgIH1cbn1cblxuZXhwb3J0IHtJbnRlbnRBbmFseXRpY3N9O1xuIiwiaW1wb3J0IHtJbnRlbnRBbmFseXRpY3N9IGZyb20gJy4vSW50ZW50QW5hbHl0aWNzJztcblxuaW1wb3J0IHtHb29nbGVBbmFseXRpY3N9IGZyb20gJy4vY291bnRlcnMvR29vZ2xlQW5hbHl0aWNzJztcbmltcG9ydCB7WWFuZGV4TWV0cmlrYX0gZnJvbSAnLi9jb3VudGVycy9ZYW5kZXhNZXRyaWthJztcbmltcG9ydCB7UGl3aWt9IGZyb20gJy4vY291bnRlcnMvUGl3aWsnO1xuaW1wb3J0IHtDbGlja30gZnJvbSAnLi9ldmVudHMvQ2xpY2snO1xuaW1wb3J0IHtTdWJtaXR9IGZyb20gJy4vZXZlbnRzL1N1Ym1pdCc7XG5cbmxldCB1YSA9IG5ldyBJbnRlbnRBbmFseXRpY3MoKTtcbnVhLmFkZE1vZHVsZSgnR29vZ2xlQW5hbHl0aWNzJywgR29vZ2xlQW5hbHl0aWNzKTtcbnVhLmFkZE1vZHVsZSgnWWFuZGV4TWV0cmlrYScsIFlhbmRleE1ldHJpa2EpO1xudWEuYWRkTW9kdWxlKCdQaXdpaycsIFBpd2lrKTtcbnVhLmFkZE1vZHVsZSgnQ2xpY2snLCBDbGljayk7XG51YS5hZGRNb2R1bGUoJ1N1Ym1pdCcsIFN1Ym1pdCk7XG4vL2dsb2JhbC5pbnRlbnRBbmFseXRpY3MgPSBuZXcgSW50ZW50QW5hbHl0aWNzKCk7XG5nbG9iYWwuSW50ZW50QW5hbHl0aWNzID0gdWE7XG4iLCJjbGFzcyBDb3VudGVySW50ZXJmYWNlIHtcblxuICAgIC8qKlxuICAgICAqIEhlcmUgd2UgdHVybiBvZmYgbm8tdW51c2VkLXZhcnMgd2FybmluZyBiZWNhdXNlIHRoaXMgY2xhc3MgaXMgYWN0dWFsbHkgYWJzdHJhY3QuXG4gICAgICogU28gdGhlcmUncyBhIGxvdCBvZiB1bnVzZWQgdmFycyBhbmQgaXQgaXMgbm9ybWFsIC0gd2UganVzdCB3YW50IHRvIGRlc2NyaWJlIHRoZSB3aG9sZSBpbnRlcmZhY2UuXG4gICAgICpcbiAgICAgKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IDBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBsb2NhdG9yIHtJbnRlbnRBbmFseXRpY3N9XG4gICAgICogQHBhcmFtIGNvdW50ZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihsb2NhdG9yLCBjb3VudGVyKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgY291bnRlcik7XG4gICAgICAgIHRoaXMuY291bnRlclNldCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxvY2F0b3IgPSBsb2NhdG9yO1xuICAgICAgICB0aGlzLmluaXQoY291bnRlci5vcHRpb25zKTtcbiAgICAgICAgdGhpcy5yZXNvbHZlSnNPYmplY3QoY291bnRlci5qc09iamVjdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdFxuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICovXG4gICAgaW5pdChvcHRpb25zKSB7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIG5hbWVcbiAgICAgKiBAcmV0dXJuIHt7fX1cbiAgICAgKi9cbiAgICByZXNvbHZlSnNPYmplY3QobmFtZSkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFNlbmQgZXZlbnRcbiAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgKiBAcGFyYW0gZGF0YVxuICAgICAqIEBwYXJhbSBwYXJhbXNcbiAgICAgKi9cbiAgICBzZW5kRXZlbnQoZXZlbnQsIGRhdGEsIHBhcmFtcykge1xuICAgIH1cbn1cblxuZXhwb3J0IHtDb3VudGVySW50ZXJmYWNlfTtcbiIsImltcG9ydCB7Q291bnRlckludGVyZmFjZX0gZnJvbSAnLi9Db3VudGVySW50ZXJmYWNlJztcbmltcG9ydCB7SW50ZW50QW5hbHl0aWNzfSBmcm9tICcuLi9JbnRlbnRBbmFseXRpY3MnO1xuXG5jbGFzcyBHb29nbGVBbmFseXRpY3MgZXh0ZW5kcyBDb3VudGVySW50ZXJmYWNlIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIGluaXQob3B0aW9ucykge1xuICAgICAgICBzdXBlci5pbml0KG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBuYW1lXG4gICAgICogQHJldHVybiB7e319XG4gICAgICovXG4gICAgcmVzb2x2ZUpzT2JqZWN0KG5hbWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3dbbmFtZV0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgd2luZG93W25hbWVdKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmpzT2JqZWN0ID0gd2luZG93W25hbWVdLmdldEJ5TmFtZSh0aGlzLnRpdGxlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3VudGVyU2V0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoICgkZSkge1xuICAgICAgICAgICAgICAgICAgICBJbnRlbnRBbmFseXRpY3MubG9nRXJyb3IoYENhbnQgaW5pdGlhbGl6ZSBHb29nbGVDb3VudGVyIHdpdGggdGl0bGUgJyR7dGhpcy50aXRsZX0nYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBJbnRlbnRBbmFseXRpY3MubG9nRXJyb3IoYEdsb2JhbCBHb29nbGUgQW5hbHl0aWNzIGZ1bmN0aW9uICcke25hbWV9JyBub3QgZm91bmQhYCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgKiBAcGFyYW0gZGF0YVxuICAgICAqIEBwYXJhbSBwYXJhbXNcbiAgICAgKi9cbiAgICBzZW5kRXZlbnQoZXZlbnQsIGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zb2xlLmxvZyh0eXBlb2YgdGhpcy5qc09iamVjdCk7XG4gICAgICAgIC8vIHRoaXMuanNPYmplY3QoJ3NlbmQnLCAnZXZlbnQnLCApO1xuICAgIH1cbn1cblxuZXhwb3J0IHtHb29nbGVBbmFseXRpY3N9O1xuIiwiaW1wb3J0IHtDb3VudGVySW50ZXJmYWNlfSBmcm9tICcuL0NvdW50ZXJJbnRlcmZhY2UnO1xuXG5jbGFzcyBDb3VudGVyUGl3aWsgZXh0ZW5kcyBDb3VudGVySW50ZXJmYWNlIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIGluaXQob3B0aW9ucykge1xuICAgICAgICBzdXBlci5pbml0KG9wdGlvbnMpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIG5hbWVcbiAgICAgKiBAcmV0dXJuIHt7fX1cbiAgICAgKi9cbiAgICByZXNvbHZlSnNPYmplY3QobmFtZSkge1xuICAgICAgICByZXR1cm4gd2luZG93W25hbWVdIHx8IHN1cGVyLnJlc29sdmVKc09iamVjdChuYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgKiBAcGFyYW0gZGF0YVxuICAgICAqIEBwYXJhbSBwYXJhbXNcbiAgICAgKi9cbiAgICBzZW5kRXZlbnQoZXZlbnQsIGRhdGEsIHBhcmFtcykge1xuICAgIH1cbn1cblxuZXhwb3J0IHtDb3VudGVyUGl3aWt9O1xuIiwiaW1wb3J0IHtDb3VudGVySW50ZXJmYWNlfSBmcm9tICcuL0NvdW50ZXJJbnRlcmZhY2UnO1xuXG5jbGFzcyBZYW5kZXhNZXRyaWthIGV4dGVuZHMgQ291bnRlckludGVyZmFjZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKi9cbiAgICBpbml0KG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5ldmVudHNRdWV1ZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgc3VwZXIuaW5pdChvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gbmFtZVxuICAgICAqIEByZXR1cm4ge3t9fVxuICAgICAqL1xuICAgIHJlc29sdmVKc09iamVjdChuYW1lKSB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICBTdHJpbmcoYCR7bmFtZX0ke3RoaXMuY291bnRlcklkfWluaXRlZGApLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCd1bmRlZmluZWQnICE9PSB0eXBlb2Ygd2luZG93W25hbWUgKyB0aGlzLmNvdW50ZXJJZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5qc09iamVjdCA9IHdpbmRvd1tuYW1lICsgdGhpcy5jb3VudGVySWRdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvdW50ZXJTZXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIEludGVudEFuYWx5dGljcy5sb2dFcnJvcihgQ2FudCBpbml0aWFsaXplIFlhbmRleENvdW50ZXIgd2l0aCBpZCAnJHt0aGlzLmNvdW50ZXJJZH0nYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBldmVudFxuICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAqL1xuICAgIHNlbmRFdmVudChldmVudCwgZGF0YSwgcGFyYW1zKSB7XG4gICAgICAgIC8vc29tZSBraW5kIG9mIHF1ZXVlIGZvciBZYW5kZXggYmVmb3JlIGNvdW50ZXIgbm90IHlldCBpbml0aWFsaXplZFxuICAgICAgICAvL0dvb2dsZSBoYXMgb3duIHF1ZXVlXG4gICAgICAgIGlmIChmYWxzZSA9PT0gdGhpcy5jb3VudGVyU2V0KSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50c1F1ZXVlLnNldChTeW1ib2woKSwge2V2ZW50LCBkYXRhLCBwYXJhbXN9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmV2ZW50c1F1ZXVlLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgdGhpcy5ldmVudHNRdWV1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50c1F1ZXVlLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2VuZCh7ZXZlbnQsIGRhdGEsIHBhcmFtc30pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGV2ZW50XG4gICAgICogQHBhcmFtIGRhdGFcbiAgICAgKiBAcGFyYW0gcGFyYW1zXG4gICAgICovXG4gICAgc2VuZCh7ZXZlbnQsIGRhdGEsIHBhcmFtc30pIHtcbiAgICAgICAgY29uc29sZS5sb2coZXZlbnQpO1xuICAgICAgICAvL3RoaXMuanNPYmplY3QucmVhY2hHb2FsKGV2ZW50LCBwYXJhbXMgfHwge30pO1xuICAgIH1cbn1cblxuZXhwb3J0IHtZYW5kZXhNZXRyaWthfTtcbiIsImltcG9ydCB7RXZlbnRJbnRlcmZhY2V9IGZyb20gJy4vRXZlbnRJbnRlcmZhY2UnO1xuXG5jbGFzcyBDbGljayBleHRlbmRzIEV2ZW50SW50ZXJmYWNlIHtcblxuICAgIGdldCBldmVudE5hbWUgKCkge1xuICAgICAgICByZXR1cm4gJ2NsaWNrJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGVyXG4gICAgICogQHBhcmFtIGV2ZW50XG4gICAgICovXG4gICAgaGFuZGxlKGV2ZW50KSB7XG4gICAgICAgIGZvciAobGV0IGNvdW50ZXIgb2YgdGhpcy5sb2NhdG9yLmNvdW50ZXJzLnZhbHVlcygpKSB7XG4gICAgICAgICAgICBjb3VudGVyLnNlbmRFdmVudChldmVudCwge30sIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IHtDbGlja307XG4iLCJjbGFzcyBFdmVudEludGVyZmFjZSB7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gbG9jYXRvciBJbnRlbnRBbmFseXRpY3NcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGxvY2F0b3IsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gbG9jYXRvcjtcbiAgICAgICAgdGhpcy5pbml0KG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmF0dGFjaEhhbmRsZXJzKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGdldCBldmVudE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0XG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKi9cbiAgICBpbml0KG9wdGlvbnMpIHtcblxuICAgIH1cblxuICAgIGF0dGFjaEhhbmRsZXJzKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbiAgICAgICAgaWYgKG9wdGlvbnMgIT09IG51bGwgJiYgaGFzLmNhbGwob3B0aW9ucywgJ3NlbGVjdG9ycycpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNlbGVjdG9yIG9mIG9wdGlvbnMuc2VsZWN0b3JzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5ldmVudE5hbWUsIChldmVudCkgPT4gdGhpcy5oYW5kbGUoZXZlbnQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyXG4gICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAqL1xuICAgIGhhbmRsZShwYXJhbXMpIHtcbiAgICB9XG59XG5cbmV4cG9ydCB7RXZlbnRJbnRlcmZhY2V9O1xuIiwiaW1wb3J0IHtFdmVudEludGVyZmFjZX0gZnJvbSAnLi9FdmVudEludGVyZmFjZSc7XG5cbmNsYXNzIFN1Ym1pdCBleHRlbmRzIEV2ZW50SW50ZXJmYWNlIHtcblxuICAgIGdldCBldmVudE5hbWUgKCkge1xuICAgICAgICByZXR1cm4gJ3N1Ym1pdCc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlclxuICAgICAqIEBwYXJhbSBldmVudFxuICAgICAqL1xuICAgIGhhbmRsZShldmVudCkge1xuICAgICAgICBmb3IgKGxldCBjb3VudGVyIG9mIHRoaXMubG9jYXRvci5jb3VudGVycy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgY291bnRlci5zZW5kRXZlbnQoZXZlbnQsIHt9LCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7U3VibWl0fTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
